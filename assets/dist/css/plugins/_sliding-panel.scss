/**
 * Base styles for plugin to work
**/

body {
	width: 100%;

	&.sliding-panel-is-animating-in,
	&.sliding-panel-is-open {
		overflow: hidden;
		position: fixed;
	}
}

#site-wrapper { // This div needs to wrap everything between the body tag
	overflow: hidden;
	width: 100%;
}

.btn-open-sliding-panel {
	touch-action: manipulation;
}

#sliding-panel {
	backface-visibility: hidden;
	background-color: #4d4d4f;
	bottom: 0;
	overflow: hidden;
	position: fixed;
	top: 0;
	transition: transform 200ms, visibility 0s linear 200ms;
	visibility: hidden;
	width: 75%;
	z-index: 99999;

	@media (min-width: 768px) {
		width: 50%;
	}

	@media (min-width: 1200px) {
		width: 33.3333%
	}

	.btn-close-sliding-panel {
		background: none transparent;
		border: 0;
		border-radius: 0;
		box-shadow: none;
		cursor: pointer;
		height: 24px;
		outline: none;
		padding: 0;
		position: absolute;
		right: 15px;
		top: 15px;
		touch-action: manipulation;
		user-select: none;
		white-space: nowrap;
		width: 24px;
		z-index: 2;

		&:before,
		&:after {
			background-color: #fff;
			content: '';
			height: 3px;
			left: 50%;
			margin: -2px 0 0 -15px;
			position: absolute;
			top: 50%;
			width: 30px;
		}

		&:before {
			transform: rotate(45deg);
		}

		&:after {
			transform: rotate(135deg);
		}
	}

	.sliding-panel-overflow {
		bottom: 0;
		left: 0;
		-webkit-overflow-scrolling: touch;
		overflow-x: hidden;
		overflow-y: auto;
		position: absolute;
		right: 0;
		top: 53px;
		z-index: 1;

		// Remove/hide scrollbar
		margin-right: -20px;
		padding-right: 20px;
		-ms-overflow-style: none;  /* Internet Explorer 10+ */
		scrollbar-width: none;  /* Firefox */

		&::-webkit-scrollbar {
			display: none;  /* Safari and Chrome */
		}
	}

	&.appear-from-left {
		left: 0;
		transform: translateX(-100%);
	}

	&.appear-from-right {
		right: 0;
		transform: translateX(100%);
	}
}

#sliding-panel-overlay {
	backface-visibility: hidden;
	bottom: 0;
	cursor: pointer;
	height: 100%;
	left: 0;
	position: fixed;
	right: 0;
	top: 0;
	transition: background-color 200ms linear, visibility 0s linear 200ms;
	visibility: hidden;
	z-index: 99991;
}


.sliding-panel-is-animating,
.sliding-panel-is-open {
	#site-wrapper {
		left: 0;
		position: fixed;
	}

	#sliding-panel {
		overflow: visible;
	}
}

.sliding-panel-is-animating-in,
.sliding-panel-is-open {
	#sliding-panel {
		transform: translateX(0);
		transition: transform 200ms, visibility 0s linear 0s;
		visibility: visible;
	}

	#sliding-panel-overlay {
		background-color: rgba(0, 0, 0, .9);
		transition: background-color 200ms linear, visibility 0s linear 0s;
		visibility: visible;
	}
}


/**
 * Custom styles
 */
body {
	&.sliding-panel-is-open {
		@include media-breakpoint-up(lg) {
			overflow: visible;
			position: static;
		}
	}
}

#sliding-panel {
	background-color: $cod-gray;
	background-position: 50% 0;
	background-repeat: repeat;
	@include img-retina('../images/bg-pattern.png', '../images/bg-pattern-2x.png', 204px, 196px);
	opacity: 0;
	transition: opacity 200ms linear, visibility 0s linear 200ms;
	width: 100%;

	.sliding-panel-overflow {
		bottom: 80px;
		margin-right: rem(-20px);
		padding: 0 calc(30px + 1.25rem) 0 30px;
		top: 180px;

		ul {
			margin: 0;

			li {
				+ li {
					border-top: 1px solid $white20;
				}

				a {
					color: $white;
					display: block;
					font: 700 26px $font-base-condensed;
					letter-spacing: 4px;
					padding: 16px 30px;
					text-transform: uppercase;

					@supports (-moz-appearance:none) {
						padding: 19px 30px 13px;
					}

					@supports (-ms-ime-align:auto) {
						padding: 19px 30px 13px;
					}

					&:hover {
						text-decoration: none;
					}
				}

				&.has-submenu {
					padding-top: 20px;

					> a {
						color: $silver-chalice;
						font-size: 18px;
						padding-bottom: 12px;
					}

					ul {
						li {
							a {
								font-size: 20px;
							}
						}
					}
				}

				&.has-submenu-collapse {
					> a {
						&:after {
							border-color: $dim-gray transparent transparent transparent;
							border-style: solid;
							border-width: 9px 6px 0 6px;
							content: '';
							display: inline-block;
							height: 0;
							margin-left: 5px;
							margin-top: 13px;
							transform: rotate(180deg);
							transition: border-color 200ms linear, transform 200ms $ease-in-out-cubic;
							vertical-align: top;
							width: 0;

							@supports (-moz-appearance:none) {
								margin-top: 7px;
							}

							@supports (-ms-ime-align:auto) {
								margin-top: 7px;
							}
						}

						&.collapsed {
							&:after {
								transform: rotate(0deg);
							}
						}
					}

					ul {
						border-top: 1px solid rgba(255,255,255,0.2);
						padding-left: 30px;

						li {
							a {
								color: $silver;
								font-size: 20px;
								letter-spacing: 2px;
								padding: 15px 20px;

								@supports (-moz-appearance:none) {
									padding: 17px 20px 13px;
								}

								@supports (-ms-ime-align:auto) {
									padding: 17px 20px 13px;
								}
							}
						}
					}
				}
			}
		}
	}

	.actions {
		bottom: 10px;
		left: 10px;
		position: absolute;
		right: 10px;
		z-index: 1;

		.btn-discord {
			font-size: 13px;
			padding: 1.461538461538462em 1.153846153846154em; /* 19/13 15/13 */

			svg {
				margin-right: 10px;
			}

			&:after {
				display: none;
			}
		}
	}

	&.appear-from-left,
	&.appear-from-right {
		transform: none;
	}
}

.sliding-panel-is-animating-in,
.sliding-panel-is-open {
	.l-navigation {
		box-shadow: none;

		@include media-breakpoint-up(lg) {
			box-shadow: 0 2px 4px 0 $black50;
		}

		.l-ui-dark-gray-bg-wrapper {
			background-color: transparent;

			@include media-breakpoint-up(lg) {
				background-color: $cod-gray;
			}
		}
	}

	#sliding-panel {
		opacity: 1;
		transition: opacity 200ms linear;
	}
}

.sliding-panel-is-open {
	#site-wrapper {
		@include media-breakpoint-up(lg) {
			position: static;
			top: auto !important;
		}
	}
}
